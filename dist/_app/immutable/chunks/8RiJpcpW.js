import{u as w,r as t,i as C,e as h,h as m,j as E,k as q,t as A,q as i}from"./B-Q1TzRt.js";import{l as b}from"./CEdD1vL5.js";function j(e,c,l=c){var f=C(),v=new WeakSet;b(e,"input",d=>{var a=d?e.defaultValue:e.value;if(a=u(e)?n(a):a,l(a),h!==null&&v.add(h),f&&a!==(a=c())){var _=e.selectionStart,s=e.selectionEnd;e.value=a??"",s!==null&&(e.selectionStart=_,e.selectionEnd=Math.min(s,e.value.length))}}),(m&&e.defaultValue!==e.value||w(c)==null&&e.value)&&(l(u(e)?n(e.value):e.value),h!==null&&v.add(h)),t(()=>{var d=c();if(e===document.activeElement){var a=E??h;if(v.has(a))return}u(e)&&d===n(e.value)||e.type==="date"&&!d&&!e.value||d!==e.value&&(e.value=d??"")})}const k=new Set;function B(e,c,l,f,v=f){var d=l.getAttribute("type")==="checkbox",a=e;let _=!1;if(c!==null)for(var s of c)a=a[s]??(a[s]=[]);a.push(l),b(l,"change",()=>{var r=l.__value;d&&(r=S(a,r,l.checked)),v(r)},()=>v(d?[]:null)),t(()=>{var r=f();if(m&&l.defaultChecked!==l.checked){_=!0;return}d?(r=r||[],l.checked=r.includes(l.__value)):l.checked=q(l.__value,r)}),A(()=>{var r=a.indexOf(l);r!==-1&&a.splice(r,1)}),k.has(a)||(k.add(a),i(()=>{a.sort((r,o)=>r.compareDocumentPosition(o)===4?-1:1),k.delete(a)})),i(()=>{if(_){var r;if(d)r=S(a,r,l.checked);else{var o=a.find(y=>y.checked);r=o==null?void 0:o.__value}v(r)}})}function D(e,c,l=c){b(e,"change",f=>{var v=f?e.defaultChecked:e.checked;l(v)}),(m&&e.defaultChecked!==e.checked||w(c)==null)&&l(e.checked),t(()=>{var f=c();e.checked=!!f})}function S(e,c,l){for(var f=new Set,v=0;v<e.length;v+=1)e[v].checked&&f.add(e[v].__value);return l||f.delete(c),Array.from(f)}function u(e){var c=e.type;return c==="number"||c==="range"}function n(e){return e===""?null:+e}export{B as a,j as b,D as c};
